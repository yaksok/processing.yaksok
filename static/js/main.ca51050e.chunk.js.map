{"version":3,"sources":["App.module.css","App.js","index.js"],"names":["module","exports","App","editorRef","useRef","iframeRef","useEffect","editor","current","ace","edit","renderer","setScrollMargin","window","innerHeight","setOptions","selectionStyle","useSoftTabs","highlightActiveLine","showPrintMargin","theme","YaksokMode","require","Mode","getSession","setMode","className","styles","onClick","getIframeSrcDoc","getValue","then","jsCode","srcDoc","console","log","srcdoc","id","initialCode","ref","sandbox","trimStart","stub","code","stubFnCode","yaksokCode","a","compiler","yaksok","JsTargetCompiler","compile","ReactDOM","render","document","getElementById"],"mappings":"mFACAA,EAAOC,QAAU,CAAC,OAAS,oBAAoB,WAAa,wBAAwB,OAAS,oBAAoB,OAAS,sB,oJCmD3GC,MA3Cf,WACI,IAAMC,EAAYC,mBACZC,EAAYD,mBAsBlB,OArBAE,qBAAU,WACN,IAAMC,EAASJ,EAAUK,QAAUC,IAAIC,KAAK,UAC5CH,EAAOI,SAASC,gBAAgB,GAAIC,OAAOC,aAC3CP,EAAOQ,WAAW,CACdC,eAAgB,OAChBC,aAAa,EACbC,qBAAqB,EACrBC,iBAAiB,EACjBC,MAAO,sBAEX,IAAMC,EAAaZ,IAAIa,QAAQ,mBAAmBC,KAClDhB,EAAOiB,aAAaC,QAAQ,IAAIJ,KACjC,IASI,oCACH,yBAAKK,UAAWC,UACZ,4BACID,UAAWC,aACXC,QAZc,Y,4CAGtBC,CAFe1B,EAAUK,QACCsB,YACEC,MAAK,YAAyB,IAAtBC,EAAqB,EAArBA,OAAQC,EAAa,EAAbA,OACxCC,QAAQC,IAAIH,GACZ3B,EAAUG,QAAQ4B,OAASH,OAQvB,kBAAC,IAAD,QAGR,yBAAKI,GAAG,SAASX,UAAWC,UACvBW,GAEL,4BACIC,IAAKlC,EACLqB,UAAWC,SACXa,QAAQ,+FAOdF,EAAc,oiJA4FlBG,YAEF,SAASC,EAAKC,GACV,MA9Ie,wiGAgJXC,EACAD,EAAO,mRASf,IAAMC,EAAU,0O,4CAUhB,WAA+BC,GAA/B,mBAAAC,EAAA,6DACUC,EAAW,IAAIC,WAAgBC,iBADzC,SAEyBF,EAASG,QAAQR,EAAKG,IAF/C,cAEUb,EAFV,OAGUC,EAHV,sfAsBUD,EAtBV,0DA2BW,CACHA,SACAC,WA7BR,4C,sBCtKAkB,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.ca51050e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"App_header__3ZZ1n\",\"playButton\":\"App_playButton__38Hm1\",\"editor\":\"App_editor__28Gqx\",\"result\":\"App_result__3tsSR\"};","import React, { useEffect, useRef } from 'react';\nimport raw from 'raw.macro';\nimport { IoIosPlayCircle } from 'react-icons/io';\nimport * as yaksok from 'yaksok';\n\nimport * as styles from './App.module.css';\n\nconst yaksokPrelude = raw('./processing.yaksok');\n\nfunction App() {\n    const editorRef = useRef();\n    const iframeRef = useRef();\n    useEffect(() => {\n        const editor = editorRef.current = ace.edit('editor');\n        editor.renderer.setScrollMargin(10, window.innerHeight);\n        editor.setOptions({\n            selectionStyle: 'text',\n            useSoftTabs: true,\n            highlightActiveLine: false,\n            showPrintMargin: false,\n            theme: 'ace/theme/monokai',\n        });\n        const YaksokMode = ace.require('ace/mode/yaksok').Mode;\n        editor.getSession().setMode(new YaksokMode());\n    }, []);\n    const onPlayButtonClick = () => {\n        const editor = editorRef.current;\n        const yaksokCode = editor.getValue();\n        getIframeSrcDoc(yaksokCode).then(({ jsCode, srcDoc }) => {\n            console.log(jsCode);\n            iframeRef.current.srcdoc = srcDoc;\n        });\n    };\n    return <>\n        <div className={styles.header}>\n            <button\n                className={styles.playButton}\n                onClick={onPlayButtonClick}>\n                <IoIosPlayCircle/>\n            </button>\n        </div>\n        <div id=\"editor\" className={styles.editor}>\n            {initialCode}\n        </div>\n        <iframe\n            ref={iframeRef}\n            className={styles.result}\n            sandbox=\"allow-scripts allow-pointer-lock allow-same-origin allow-popups allow-forms allow-modals\"\n        />\n    </>;\n}\n\nexport default App;\n\nconst initialCode = `\n경로들: []\n그리는_중: 거짓\n다음: 0\n현재: ()\n과거: ()\n\n약속 입자 만들기 (정보)\n    결과: {\n        위치: 정보.위치,\n        속도: 정보.속도,\n        생명: 255,\n    }\n\n약속 (입자) 입자 갱신하기\n    입자.위치: (입자.위치)와 입자.속도 벡터의 합\n    입자.속도: 입자.속도 벡터 곱하기 0.95\n    입자.생명: 입자.생명 - 1\n\n약속 (입자) 입자와 (다음) 입자 그리기\n    만약 입자.생명 <= 1 이면\n        약속 그만\n    선 설정 { 색상: 'rgba(0, 0, 0, ' + (입자.생명 / 255) + ')' }\n    채우기 설정 { 색상: 'rgba(0, 0, 0, ' + (입자.생명 / 2 / 255) + ')' }\n    타원 그리기 { 위치: 입자.위치, 가로: 8, 세로: 8 }\n    만약 다음 != () 이면\n        직선 그리기 { 시작: 입자.위치, 끝: 다음.위치 }\n\n약속 (경로) 경로 갱신하기\n    반복 경로 의 지금 마다\n        지금 입자 갱신하기\n\n약속 (경로) 경로 그리기\n    반복 1~(경로.길이) 의 숫자 마다\n        지금: 경로[숫자]\n        다음: 경로[숫자 + 1]\n        지금 입자와 다음 입자 그리기\n\n약속 준비하기\n    바깥 현재\n    바깥 과거\n    도화지 크기는 { 가로: 720, 세로: 400 }\n    현재: { 위쪽: 0, 왼쪽: 0 }\n    과거: { 위쪽: 0, 왼쪽: 0 }\n\n약속 그리기\n    바깥 경로들\n    바깥 그리는_중\n    바깥 다음\n    바깥 현재\n    바깥 과거\n    배경색은 '#ccc'\n    선 설정 { 색상: 'none' }\n    채우기 설정 { 색상: '#000' }\n    글쓰기 {\n        내용: '마우스를 드래그 해보세요',\n        위치: { 위쪽: 20, 왼쪽: 20 },\n        크기: 16,\n    }\n    글쓰기 {\n        내용: '원전: https://editor.p5js.org/p5/sketches/Hello_P5:_drawing',\n        위치: { 위쪽: 40, 왼쪽: 20 },\n        크기: 16,\n    }\n    만약 (지나간 시간) > 다음 그리고 그리는_중 이면\n        현재: { 위쪽: 마우스.위쪽, 왼쪽: 마우스.왼쪽 }\n        속도: 현재와 과거 벡터의 차\n        새_입자: 입자 만들기 {\n            위치: 현재,\n            속도: 속도 벡터 곱하기 0.05,\n        }\n        경로들[경로들.길이]에 새_입자 추가하기\n        다음: (지나간 시간) + (0.1 보다 작은 아무 수)\n        과거: { 위쪽: 현재.위쪽, 왼쪽: 현재.왼쪽 }\n    반복 경로들 의 지금 마다\n        지금 경로 갱신하기\n        지금 경로 그리기\n\n약속 마우스를 누르면\n    바깥 경로들\n    바깥 그리는_중\n    바깥 다음\n    바깥 과거\n    다음: 0\n    그리는_중: 참\n    과거.위쪽: 마우스.위쪽\n    과거.왼쪽: 마우스.왼쪽\n    경로들[경로들.길이 + 1]: []\n\n약속 마우스를 놓으면\n    바깥 그리는_중\n    그리는_중: 거짓\n`.trimStart();\n\nfunction stub(code) {\n    return (\n        yaksokPrelude +\n        stubFnCode +\n        code + '\\n' +\n        '__stub (결속 준비하기) \"setup\"\\n' +\n        '__stub (결속 그리기) \"draw\"\\n' +\n        '__stub (결속 마우스를 누르면) \"mousePressed\"\\n' +\n        '__stub (결속 마우스를 놓으면) \"mouseReleased\"\\n' +\n        ''\n    );\n}\n\nconst stubFnCode = `\n번역(자바스크립트) __stub (cb) (key)\n***\n    window[key] = () => {\n        window.마우스 = { 위쪽: window.mouseY, 왼쪽: window.mouseX };\n        cb();\n    };\n***\n`;\n\nasync function getIframeSrcDoc(yaksokCode) {\n    const compiler = new yaksok.compiler.JsTargetCompiler();\n    const jsCode = await compiler.compile(stub(yaksokCode));\n    const srcDoc = `\n<!DOCTYPE HTML>\n<html>\n<head>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/p5.js\" crossorigin=\"\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/addons/p5.sound.min.js\" crossorigin=\"\"></script>\n    <meta charset=\"utf-8\">\n    <style>\n        html, body {\n            margin: 0;\n            padding: 0;\n        }\n        canvas {\n            display: block;\n        }\n    </style>\n</head>\n<body>\n    <script>\n        ${jsCode}\n    </script>\n</body>\n</html>\n`;\n    return {\n        jsCode,\n        srcDoc,\n    };\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}